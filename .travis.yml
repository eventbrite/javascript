language: node_js
node_js:
  - "node"
  - "10"
  - "8"
  - "6"

cache: yarn
install: yarn

script: yarn test

deploy:
  # Deploy new version of eslint-config-eventbrite-legacy (but only on the "node" test matrix)
  - provider: script
    script: npm publish packages/eslint-config-eventbrite-legacy
    on:
      tags: true
      condition: $TRAVIS_TAG =~ ^eslint-config-eventbrite-legacy-v.+$
      node: "node"

  # Deploy new version of eslint-config-eventbrite (but only on the "node" test matrix)
  - provider: script
    script: npm publish packages/eslint-config-eventbrite
    on:
      tags: true
      condition: $TRAVIS_TAG =~ ^eslint-config-eventbrite-v.+$
      node: "node"

  # Deploy new version of eslint-config-eventbrite-react (but only on the "node" test matrix)
  - provider: script
    script: npm publish packages/eslint-config-eventbrite-react
    on:
      tags: true
      condition: $TRAVIS_TAG =~ ^eslint-config-eventbrite-react-v.+$
      node: "node"
